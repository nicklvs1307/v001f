Postgres is up - executing command
Server.js is being executed!
API_KEY_ENCRYPTION_KEY is not defined in .env. Please set it for security.
Conexão com o banco de dados estabelecida com sucesso (Sequelize).
Server is running on port 5000
Agendador de relatório diário iniciado. A tarefa será executada todos os dias às 8:00.
Agendador de lembrete de cupons iniciado. A tarefa será executada todos os dias às 9:00.
[Auth Middleware] Request: GET /api/campanhas?tenantId=3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd
[Auth Middleware] Request: POST /api/auth/verify-token
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/campanhas?tenantId=3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: POST /api/auth/verify-token
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/recompensas
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/roletas
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "name", "description", "isSystemRole", "createdAt", "updatedAt" FROM "roles" AS "Role" WHERE "Role"."name" = 'Admin';
Executing (default): SELECT "id", "name", "description", "isSystemRole", "createdAt", "updatedAt" FROM "roles" AS "Role" WHERE "Role"."name" = 'Admin';
[Authorize Debug] User Role: Admin, Required: recompensas:read
[Authorize Debug] Role ID: ce609d07-d83f-4002-a892-e17c91b767d3, Module: recompensas, Action: read
Executing (default): SELECT "RolePermissao"."roleId", "RolePermissao"."permissaoId", "RolePermissao"."createdAt", "RolePermissao"."updatedAt", "permissao"."id" AS "permissao.id", "permissao"."module" AS "permissao.module", "permissao"."action" AS "permissao.action", "permissao"."description" AS "permissao.description", "permissao"."createdAt" AS "permissao.createdAt", "permissao"."updatedAt" AS "permissao.updatedAt" FROM "role_permissoes" AS "RolePermissao" INNER JOIN "permissoes" AS "permissao" ON "RolePermissao"."permissaoId" = "permissao"."id" AND "permissao"."module" = 'recompensas' AND "permissao"."action" = 'read' WHERE "RolePermissao"."roleId" = 'ce609d07-d83f-4002-a892-e17c91b767d3';
[Authorize Debug] User Role: Admin, Required: roletas:read
[Authorize Debug] Role ID: ce609d07-d83f-4002-a892-e17c91b767d3, Module: roletas, Action: read
Executing (default): SELECT "RolePermissao"."roleId", "RolePermissao"."permissaoId", "RolePermissao"."createdAt", "RolePermissao"."updatedAt", "permissao"."id" AS "permissao.id", "permissao"."module" AS "permissao.module", "permissao"."action" AS "permissao.action", "permissao"."description" AS "permissao.description", "permissao"."createdAt" AS "permissao.createdAt", "permissao"."updatedAt" AS "permissao.updatedAt" FROM "role_permissoes" AS "RolePermissao" INNER JOIN "permissoes" AS "permissao" ON "RolePermissao"."permissaoId" = "permissao"."id" AND "permissao"."module" = 'roletas' AND "permissao"."action" = 'read' WHERE "RolePermissao"."roleId" = 'ce609d07-d83f-4002-a892-e17c91b767d3';
[Authorize Debug] Has Permission Result: true
Executing (default): SELECT "id", "tenantId", "name", "description", "pointsRequired", "type", "value", "imageUrl", "active", "createdAt", "updatedAt" FROM "recompensas" AS "Recompensa" WHERE "Recompensa"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd' ORDER BY "Recompensa"."name" ASC;
[Authorize Debug] Has Permission Result: true
Executing (default): SELECT "id", "tenantId", "nome", "descricao", "active", "createdAt", "updatedAt" FROM "roletas" AS "Roleta" WHERE "Roleta"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: POST /api/campanhas
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): INSERT INTO "campanhas" ("id","tenantId","nome","mensagem","rewardType","recompensaId","roletaId","dataValidade","criterioSelecao","status","messageDelaySeconds","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) RETURNING "id","tenantId","nome","mensagem","rewardType","recompensaId","roletaId","dataValidade","criterioSelecao","status","startDate","endDate","messageDelaySeconds","createdAt","updatedAt";
[Auth Middleware] Request: GET /api/campanhas?tenantId=3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: POST /api/auth/verify-token
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/campanhas?tenantId=3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: POST /api/campanhas/c2d9c388-18f4-4416-b400-4ddfe76743ce/process
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): UPDATE "campanhas" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3 AND "tenantId" = $4
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Campanha] Iniciando processamento para campanha c2d9c388-18f4-4416-b400-4ddfe76743ce
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "name", "email", "phone", "birthDate", "respondentSessionId", "gender", "createdAt", "updatedAt" FROM "clients" AS "Client" WHERE "Client"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): INSERT INTO "cupons" ("id","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataValidade","status","createdAt","updatedAt","campanhaId") VALUES ('60e25e29-a15e-4397-9123-81f347f9f1c3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-54B94DE9','07adfe04-c0e5-4ad2-88c9-e935cf3e9832','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ac746464-a004-421f-b353-214fc41ae397','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-A5CF0EC4','c808fcb4-66ef-45b8-b5f2-d17477709f5a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('db6248a7-9b1c-4e8a-bd62-ce5417ff8bd3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-BAF5BB6F','79e7cedd-2d8a-41d7-afe1-fc2ba06fbb4a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('74ae18c9-35c3-4710-871b-654941c1e84e','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-37BEAF6A','0c08fc9f-713f-4cad-a145-2392cc2c0b02','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d454cbb2-74f8-4466-97e1-5e424f3210bf','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-F6BE9EF5','aa3fb8bd-6204-428d-a02b-b3b9c50e88d4','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('278f7721-480f-4856-ba49-3f731639bc49','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-D5480A8B','5c17ebf1-51db-4987-a358-d60711da7617','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('58e62d1d-07c2-43c1-8f29-9573c005effe','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-85D48EB5','0c3affd4-31f5-419f-b560-646340c6b6e7','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e7dbf26d-2bc6-49d7-970f-8c9b6bf5fdd7','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-884C6D0C','90c675d5-c5dc-462b-a68f-a10cfa96334c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('0fabec08-5ada-4294-9d70-53be83d83a19','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-E88793E1','e4a34a27-16e4-4d0d-b872-f3023765fcdf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('8ba7d08b-e5be-4e02-a24f-45b8c8aefb8d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-08460E37','03aa0613-a231-4c70-8532-139b3fc92a3e','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e2607bb4-39b3-4e2e-ae15-e9ceb4870018','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-80144A11','ec9b4596-8cbc-453f-ac47-f481efd3537c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('b89287a3-4b50-4123-b634-8152a5f7f4f4','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-6E46088B','e19b17d9-a6c6-4acf-9be1-fe84e4ffcdaf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ff73c510-032d-4c8a-8e3f-4502bd2047e0','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-FAA67D6A','5e4239d4-a711-47ff-b882-80164ba291eb','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d9dce992-bd6c-4b9c-a242-e02bd2803b2d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-9F2E7FDD','9924658b-8675-4198-bf85-073ae60b7d6c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce') RETURNING "id","pesquisaId","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataUtilizacao","dataValidade","status","ultimoContato","createdAt","updatedAt","campanhaId";
[Campanha] Falha crítica no processamento da campanha c2d9c388-18f4-4416-b400-4ddfe76743ce: Error
    at Query.run (/usr/src/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /usr/src/app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.bulkInsert (/usr/src/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:346:21)
    at async recursiveBulkCreate (/usr/src/app/node_modules/sequelize/lib/model.js:1697:25)
    at async Cupom.bulkCreate (/usr/src/app/node_modules/sequelize/lib/model.js:1786:12)
    at async CampanhaService._processCampaign (/usr/src/app/src/services/campanhaService.js:80:21) {
  name: 'SequelizeDatabaseError',
  parent: error: null value in column "recompensaId" of relation "cupons" violates not-null constraint
      at Parser.parseErrorMessage (/usr/src/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/usr/src/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/usr/src/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/usr/src/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:517:28)
      at addChunk (node:internal/streams/readable:368:12)
      at readableAddChunk (node:internal/streams/readable:341:9)
      at Readable.push (node:internal/streams/readable:278:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23) {
    length: 512,
    severity: 'ERROR',
    code: '23502',
    detail: 'Failing row contains (60e25e29-a15e-4397-9123-81f347f9f1c3, 3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd, null, CAMP-54B94DE9, 07adfe04-c0e5-4ad2-88c9-e935cf3e9832, 2025-10-21 16:31:23.41+00, null, 2025-11-20 16:31:18.829+00, active, null, 2025-10-21 16:31:23.411+00, 2025-10-21 16:31:23.411+00, c2d9c388-18f4-4416-b400-4ddfe76743ce, null).',
    hint: undefined,
    position: undefined,
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: 'public',
    table: 'cupons',
    column: 'recompensaId',
    dataType: undefined,
    constraint: undefined,
    file: 'execMain.c',
    line: '1886',
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
    routine: 'ExecConstraints',
    sql: `INSERT INTO "cupons" ("id","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataValidade","status","createdAt","updatedAt","campanhaId") VALUES ('60e25e29-a15e-4397-9123-81f347f9f1c3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-54B94DE9','07adfe04-c0e5-4ad2-88c9-e935cf3e9832','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ac746464-a004-421f-b353-214fc41ae397','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-A5CF0EC4','c808fcb4-66ef-45b8-b5f2-d17477709f5a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('db6248a7-9b1c-4e8a-bd62-ce5417ff8bd3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-BAF5BB6F','79e7cedd-2d8a-41d7-afe1-fc2ba06fbb4a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('74ae18c9-35c3-4710-871b-654941c1e84e','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-37BEAF6A','0c08fc9f-713f-4cad-a145-2392cc2c0b02','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d454cbb2-74f8-4466-97e1-5e424f3210bf','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-F6BE9EF5','aa3fb8bd-6204-428d-a02b-b3b9c50e88d4','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('278f7721-480f-4856-ba49-3f731639bc49','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-D5480A8B','5c17ebf1-51db-4987-a358-d60711da7617','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('58e62d1d-07c2-43c1-8f29-9573c005effe','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-85D48EB5','0c3affd4-31f5-419f-b560-646340c6b6e7','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e7dbf26d-2bc6-49d7-970f-8c9b6bf5fdd7','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-884C6D0C','90c675d5-c5dc-462b-a68f-a10cfa96334c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('0fabec08-5ada-4294-9d70-53be83d83a19','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-E88793E1','e4a34a27-16e4-4d0d-b872-f3023765fcdf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('8ba7d08b-e5be-4e02-a24f-45b8c8aefb8d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-08460E37','03aa0613-a231-4c70-8532-139b3fc92a3e','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e2607bb4-39b3-4e2e-ae15-e9ceb4870018','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-80144A11','ec9b4596-8cbc-453f-ac47-f481efd3537c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('b89287a3-4b50-4123-b634-8152a5f7f4f4','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-6E46088B','e19b17d9-a6c6-4acf-9be1-fe84e4ffcdaf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ff73c510-032d-4c8a-8e3f-4502bd2047e0','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-FAA67D6A','5e4239d4-a711-47ff-b882-80164ba291eb','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d9dce992-bd6c-4b9c-a242-e02bd2803b2d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-9F2E7FDD','9924658b-8675-4198-bf85-073ae60b7d6c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce') RETURNING "id","pesquisaId","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataUtilizacao","dataValidade","status","ultimoContato","createdAt","updatedAt","campanhaId";`,
    parameters: undefined
  },
  original: error: null value in column "recompensaId" of relation "cupons" violates not-null constraint
      at Parser.parseErrorMessage (/usr/src/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/usr/src/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/usr/src/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/usr/src/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:517:28)
      at addChunk (node:internal/streams/readable:368:12)
      at readableAddChunk (node:internal/streams/readable:341:9)
      at Readable.push (node:internal/streams/readable:278:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23) {
    length: 512,
    severity: 'ERROR',
    code: '23502',
    detail: 'Failing row contains (60e25e29-a15e-4397-9123-81f347f9f1c3, 3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd, null, CAMP-54B94DE9, 07adfe04-c0e5-4ad2-88c9-e935cf3e9832, 2025-10-21 16:31:23.41+00, null, 2025-11-20 16:31:18.829+00, active, null, 2025-10-21 16:31:23.411+00, 2025-10-21 16:31:23.411+00, c2d9c388-18f4-4416-b400-4ddfe76743ce, null).',
    hint: undefined,
    position: undefined,
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: 'public',
    table: 'cupons',
    column: 'recompensaId',
    dataType: undefined,
    constraint: undefined,
    file: 'execMain.c',
    line: '1886',
    routine: 'ExecConstraints',
    sql: `INSERT INTO "cupons" ("id","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataValidade","status","createdAt","updatedAt","campanhaId") VALUES ('60e25e29-a15e-4397-9123-81f347f9f1c3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-54B94DE9','07adfe04-c0e5-4ad2-88c9-e935cf3e9832','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ac746464-a004-421f-b353-214fc41ae397','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-A5CF0EC4','c808fcb4-66ef-45b8-b5f2-d17477709f5a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('db6248a7-9b1c-4e8a-bd62-ce5417ff8bd3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-BAF5BB6F','79e7cedd-2d8a-41d7-afe1-fc2ba06fbb4a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('74ae18c9-35c3-4710-871b-654941c1e84e','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-37BEAF6A','0c08fc9f-713f-4cad-a145-2392cc2c0b02','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d454cbb2-74f8-4466-97e1-5e424f3210bf','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-F6BE9EF5','aa3fb8bd-6204-428d-a02b-b3b9c50e88d4','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('278f7721-480f-4856-ba49-3f731639bc49','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-D5480A8B','5c17ebf1-51db-4987-a358-d60711da7617','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('58e62d1d-07c2-43c1-8f29-9573c005effe','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-85D48EB5','0c3affd4-31f5-419f-b560-646340c6b6e7','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e7dbf26d-2bc6-49d7-970f-8c9b6bf5fdd7','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-884C6D0C','90c675d5-c5dc-462b-a68f-a10cfa96334c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('0fabec08-5ada-4294-9d70-53be83d83a19','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-E88793E1','e4a34a27-16e4-4d0d-b872-f3023765fcdf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('8ba7d08b-e5be-4e02-a24f-45b8c8aefb8d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-08460E37','03aa0613-a231-4c70-8532-139b3fc92a3e','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e2607bb4-39b3-4e2e-ae15-e9ceb4870018','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-80144A11','ec9b4596-8cbc-453f-ac47-f481efd3537c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('b89287a3-4b50-4123-b634-8152a5f7f4f4','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-6E46088B','e19b17d9-a6c6-4acf-9be1-fe84e4ffcdaf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ff73c510-032d-4c8a-8e3f-4502bd2047e0','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-FAA67D6A','5e4239d4-a711-47ff-b882-80164ba291eb','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d9dce992-bd6c-4b9c-a242-e02bd2803b2d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-9F2E7FDD','9924658b-8675-4198-bf85-073ae60b7d6c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce') RETURNING "id","pesquisaId","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataUtilizacao","dataValidade","status","ultimoContato","createdAt","updatedAt","campanhaId";`,
    parameters: undefined
  },
  sql: `INSERT INTO "cupons" ("id","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataValidade","status","createdAt","updatedAt","campanhaId") VALUES ('60e25e29-a15e-4397-9123-81f347f9f1c3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-54B94DE9','07adfe04-c0e5-4ad2-88c9-e935cf3e9832','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ac746464-a004-421f-b353-214fc41ae397','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-A5CF0EC4','c808fcb4-66ef-45b8-b5f2-d17477709f5a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('db6248a7-9b1c-4e8a-bd62-ce5417ff8bd3','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-BAF5BB6F','79e7cedd-2d8a-41d7-afe1-fc2ba06fbb4a','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('74ae18c9-35c3-4710-871b-654941c1e84e','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-37BEAF6A','0c08fc9f-713f-4cad-a145-2392cc2c0b02','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d454cbb2-74f8-4466-97e1-5e424f3210bf','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-F6BE9EF5','aa3fb8bd-6204-428d-a02b-b3b9c50e88d4','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('278f7721-480f-4856-ba49-3f731639bc49','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-D5480A8B','5c17ebf1-51db-4987-a358-d60711da7617','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('58e62d1d-07c2-43c1-8f29-9573c005effe','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-85D48EB5','0c3affd4-31f5-419f-b560-646340c6b6e7','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e7dbf26d-2bc6-49d7-970f-8c9b6bf5fdd7','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-884C6D0C','90c675d5-c5dc-462b-a68f-a10cfa96334c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('0fabec08-5ada-4294-9d70-53be83d83a19','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-E88793E1','e4a34a27-16e4-4d0d-b872-f3023765fcdf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('8ba7d08b-e5be-4e02-a24f-45b8c8aefb8d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-08460E37','03aa0613-a231-4c70-8532-139b3fc92a3e','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('e2607bb4-39b3-4e2e-ae15-e9ceb4870018','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-80144A11','ec9b4596-8cbc-453f-ac47-f481efd3537c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('b89287a3-4b50-4123-b634-8152a5f7f4f4','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-6E46088B','e19b17d9-a6c6-4acf-9be1-fe84e4ffcdaf','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('ff73c510-032d-4c8a-8e3f-4502bd2047e0','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-FAA67D6A','5e4239d4-a711-47ff-b882-80164ba291eb','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce'),('d9dce992-bd6c-4b9c-a242-e02bd2803b2d','3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd',NULL,'CAMP-9F2E7FDD','9924658b-8675-4198-bf85-073ae60b7d6c','2025-10-21 16:31:23.410 +00:00','2025-11-20 16:31:18.829 +00:00','active','2025-10-21 16:31:23.411 +00:00','2025-10-21 16:31:23.411 +00:00','c2d9c388-18f4-4416-b400-4ddfe76743ce') RETURNING "id","pesquisaId","tenantId","recompensaId","codigo","clienteId","dataGeracao","dataUtilizacao","dataValidade","status","ultimoContato","createdAt","updatedAt","campanhaId";`,
  parameters: {}
}
Executing (default): UPDATE "campanhas" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3 AND "tenantId" = $4
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: POST /api/auth/verify-token
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/campanhas/c2d9c388-18f4-4416-b400-4ddfe76743ce
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
[Auth Middleware] Request: GET /api/campanhas/c2d9c388-18f4-4416-b400-4ddfe76743ce
Executing (default): SELECT "id", "name", "address", "phone", "email", "logoUrl", "primaryColor", "secondaryColor", "description", "website", "cnpj", "inscricaoEstadual", "reportPhoneNumber", "createdAt", "updatedAt" FROM "tenants" AS "Tenant" WHERE "Tenant"."id" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';
Executing (default): SELECT "id", "tenantId", "nome", "mensagem", "rewardType", "recompensaId", "roletaId", "dataValidade", "criterioSelecao", "status", "startDate", "endDate", "messageDelaySeconds", "createdAt", "updatedAt" FROM "campanhas" AS "Campanha" WHERE "Campanha"."id" = 'c2d9c388-18f4-4416-b400-4ddfe76743ce' AND "Campanha"."tenantId" = '3bd5b49a-56e6-45b7-9710-8d51b8f6e8dd';